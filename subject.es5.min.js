function Subject() {
    var _this = this;

    this.subscribers = [];

    this.subscribe = function (cb) {
        _this.subscribers.push({});
        var subscription = _this.subscribers[_this.subscribers.length - 1];
        subscription.callback = cb;
        subscription.unsubscribe = function () {
            subscription.callback = null;
            for (var i; i < _this.subscribers.length; i++) {
                if (!_this.subscribers[i].callback) {
                    _this.subscribers[i] = null;
                    _this.subscribers.splice(i, 1);
                }
            }
        };
        return subscription;
    };

    this.next = function (val) {
        _this.subscribers.forEach(function (sub) {
            return sub.callback ? sub.callback(val) : null;
        });
    };
}

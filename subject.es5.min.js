function Subject() {
    var _this = this;

    this.subscribers = [];

    this.subscribe = function (callback) {
        var _s = _this.subscribers.push({
            callback: callback,
            unsubscribe: function unsubscribe() {
                this.callback = null;
                for (var i; i < _this.subscribers.length; i++) {
                    if (!_this.subscribers[i].callback) {
                        _this.subscribers[i] = null;
                        _this.subscribers.splice(i, 1);
                    }
                }
            }
        }) - 1;
        return this.subscribers[_s];
    };

    this.next = function (val) {
        _this.subscribers.forEach(function (sub) {
            return sub.callback ? sub.callback(val) : null;
        });
    };
}
